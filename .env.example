# Required
CLIPROXY_MGMT_BASE_URL=http://127.0.0.1:8317
CLIPROXY_MGMT_KEY=change-me

# Sidecar HTTP API
APIM_HTTP_ADDR=127.0.0.1:8390
# Optional bootstrap admin token (compatibility path).
# If set, this token is treated as admin even without auth_identities mapping.
APIM_HTTP_AUTH_TOKEN=

# Persistence
APIM_DATA_DIR=./data
APIM_DB_PATH=./data/apim.db

# Sync intervals
APIM_KEY_SYNC_INTERVAL=30s
APIM_USAGE_SYNC_INTERVAL=2m
APIM_RECOVERY_CHECK_INTERVAL=60s

# Update check/apply
APIM_UPDATE_CHECK_ENABLED=true
APIM_UPDATE_CHECK_TIME=04:00
APIM_MANAGEMENT_LATEST_VERSION_URL=/v0/management/latest-version
APIM_UPDATE_APPLY_COMMAND=
APIM_UPDATE_ALLOW_CUSTOM_COMMAND=false
APIM_UPDATE_AUTO_APPLY_ENABLED=false

# Update endpoint auth hardening
APIM_HTTP_UPDATE_REQUIRE_AUTH=true

# Recovery hardening
APIM_DB_RECOVER_ON_CORRUPT=true
APIM_RECOVERY_SNAPSHOT_SCAN_LIMIT=10

# Optional TLS behavior for self-signed mgmt endpoint
APIM_INSECURE_SKIP_TLS_VERIFY=false

# Telegram (optional)
TELEGRAM_BOT_TOKEN=
TELEGRAM_ALLOWED_CHAT_IDS=
TELEGRAM_ALLOWED_USER_IDS=
TELEGRAM_POLL_INTERVAL=3s
APIM_TELEGRAM_DENY_HIGH_RISK_WHEN_ALLOWLIST_EMPTY=true

# Proxy (optional, for docker build/pull/runtime outbound)
# HTTP proxy port: 20171
# SOCKS5 proxy port: 20170
HTTP_PROXY=
HTTPS_PROXY=
ALL_PROXY=
NO_PROXY=127.0.0.1,localhost,host.docker.internal
GOLANG_PROXY=https://proxy.golang.org,direct
